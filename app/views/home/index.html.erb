<html>
  <head>
    <charset="utf-8">
    <title>TavoCalendar basic</title>
    <name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/app/assets/javascripts/calendar/dist/tavo-calendar.css">
    <style>
      body {
          font-family: Arial, Helvetica, sans-serif;
      }

      #my-calendar {
          max-width: 600px;
          max-height: 600px;
      }
    </style>
  </head>
  <body>
    <div id="my-calendar"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js" ></script>
    <script type="text/javascript" src="/app/assets/javascripts/calendar/dist/tavo-calendar.js"></script>

    <script>
      var poo = "<%= @links.to_s %>"
      console.log(poo)
      let date = new Date()
      let today = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate()

      const my_calendar = new TavoCalendar('#my-calendar', {
          date: "2020-7-01",
          selected: [today]
      })

      document.getElementById('my-calendar').addEventListener('calendar-select', (ev) => {
        let links = []
        let events = []


        <% @links.each do |link| %>
        console.log("<%= link.date %>");
          links.push("<%= link.date%>")
        <% end %>

        for (var link of links) {
          console.log("in link for links");
          console.log(link);
          if(link == my_calendar.getSelected()){
            events.push(link)
          }
        }

        // returns array of events for current date
        alert(events);
      })
    </script>
  </body>

</html>
